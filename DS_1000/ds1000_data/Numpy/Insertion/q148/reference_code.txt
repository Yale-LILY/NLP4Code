result = X.T[:, :, None] * X.T[:, None]
